@page
@model MowiTajm.Pages.Movies.IndexModel
@{
    ViewData["Title"] = "Sök";
}

<div class="page-content-container">
	<h1>Sök på filmtitel</h1>

    @* Sökfunktionen *@
    <form class="search-input" method="get">
        <input type="text" class="form-control me-2" name="searchInput" placeholder="sök på filmtitel.." value="@Model.SearchInput" required />
        <button class="btn btn-primary btn-search btn-black" type="submit" title="Sök" aria-label="Sök">⌕</button>
	</form>

    @if (!string.IsNullOrEmpty(Model.SearchInput))
    {
        if (Model.Movies.Count > 0)
        {
            @* Extra sökinfo *@
            <section class="search-result-head">
                <p>Visar @Model.Movies.Count av @Model.TotalResults sökresultat.</p>
            </section>

			@* Skriv ut alla filmer som hittades *@
            <section class="search-result-container">
                @foreach (var movie in Model.Movies)
                {
					@* Redirecta användaren till MovieDetailsPage när de klickar på en film. *@
                    <article class="search-result-movie-row" onclick="window.location='/Movies/MovieDetailsPage?imdbID=@movie.ImdbID'">
						
                        @* Filmposter *@
                        <div class="movie-lite-poster-container">
                            <img class="movie-lite-poster" src="@movie.Poster" alt="Filmposter för @movie.Title"/>
                        </div>

						@* Filminformation *@
                        <div class="search-result-movie-details">
                            <div class="background-blur" style="background-image: url('@movie.Poster')"></div>
                            <div class="details-content">
                                <p class="search-result-title">@movie.Title</p>
                                <p class="search-result-year">@movie.Type (@movie.Year)</p>
                            </div>
                        </div>
                    </article>

                }
            </section>
        }
        else
        {
            <p>Inga filmer hittades för "@Model.SearchInput". Prova igen!</p>
        }
    }
</div>