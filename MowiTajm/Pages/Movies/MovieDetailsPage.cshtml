@page
@model MowiTajm.Pages.Movies.MovieDetailsPageModel
@{
}

<article class="articleFullMovie">

    <section id="sectionPoster">
        <img src="@Model.Movie.Poster" />
    </section>

    <section id="sectionDetails">
        <p>@Model.Movie.Year | @Model.Movie.Runtime</p>
        <h1>@Model.Movie.Title</h1>
        <p>@Model.Movie.Genre</p>
        <p>IMDB Rating: @Model.Movie.ImdbRating</p>
        <p>@Model.Movie.Plot</p>
        <p>Released: @Model.Movie.Released</p>
        <p>Director: @Model.Movie.Director</p>
        <p>Actors: @Model.Movie.Actors</p>
    </section>

</article>

<section class="sectionAllReviews">
    @if (Model.Reviews.Count == 0)
    {
        <p>Ingen har skrivit en recension än, bli den första!</p>
    }
    else
    {
        <header>
            <h2 id="titleReviews">Recensioner (@Model.Reviews.Count)</h2>
        </header>

        @foreach (var review in Model.Reviews)
        {

            <article class="review-full">
                <header class="review-head">
                    <p class="review-meta" style="font-family: Arial, sans-serif;">
                        <span class="review-name">@review.Username</span>
                        <span class="review-stars">
                            @for (int i = 0; i < review.Rating; i++)
                            {
                                <label class="star">★</label>
                            }
                        </span>
                    </p>
                </header>

                <section class="review-body">
                    <p>@review.Title</p>
                    <p>@review.Text</p>
                </section>

                <footer class="review-footer">
                    <button asp-page="./EditReview" asp-route-id="@review.Id">✏️</button>
                    <form method="post" asp-page-handler="Delete" asp-route-id="@review.Id">
                        <button type="submit">❌</button>
                    </form>
                </footer>

            </article>
        }
    }
</section>

<section class="reviews-input-form">
    <form method="post">
        <input type="hidden" asp-for="Review.ImdbID" />

        <section class="review-input-head">
            <div>
                <input type="text" class="review-input-name" placeholder="Namn.." asp-for="Review.Username" required /> <br />
                <input type="text" class="review-input-title" placeholder="Rubrik.." asp-for="Review.Title" required />
            </div>

            <div class="review-input-stars">
                <input class="star" type="radio" id="star5" value="5" asp-for="Review.Rating">
                <label for="star5">★ </label>

                <input class="star" type="radio" id="star4" value="4" asp-for="Review.Rating">
                <label for="star4">★ </label>

                <input class="star" type="radio" id="star3" value="3" asp-for="Review.Rating">
                <label for="star3">★ </label>

                <input class="star" type="radio" id="star2" value="2" asp-for="Review.Rating">
                <label for="star2">★ </label>

                <input class="star" type="radio" id="star1" value="1" asp-for="Review.Rating">
                <label for="star1">★ </label>
            </div>
        </section>

        <textarea class="review-input-text" placeholder="Vad tyckte du om filmen?" asp-for="Review.Text" required></textarea> <br />
        <footer class="review-input-btn-submit">
            <button type="submit">➕</button>
        </footer>
    </form>
</section>